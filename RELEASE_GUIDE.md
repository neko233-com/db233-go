# DB233-Go å‘å¸ƒæµç¨‹è¯´æ˜

## ğŸ“¦ è‡ªåŠ¨å‘å¸ƒæµç¨‹

### å¿«é€Ÿå‘å¸ƒ

```powershell
# é»˜è®¤ï¼šPatch ç‰ˆæœ¬è‡ªå¢ (0.0.9 -> 0.0.10)
.\publish.ps1

# æˆ–ä½¿ç”¨ CMD
publish.cmd
```

### ç‰ˆæœ¬ç±»å‹

```powershell
# Patch ç‰ˆæœ¬ (0.0.9 -> 0.0.10) - å°ä¿®å¤
.\publish.ps1 -VersionPart patch

# Minor ç‰ˆæœ¬ (0.0.9 -> 0.1.0) - æ–°åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
.\publish.ps1 -VersionPart minor

# Major ç‰ˆæœ¬ (0.0.9 -> 1.0.0) - ç ´åæ€§æ›´æ”¹
.\publish.ps1 -VersionPart major
```

### å¯é€‰å‚æ•°

```powershell
# æ¨¡æ‹Ÿè¿è¡Œï¼ˆä¸å®é™…æäº¤å’Œæ¨é€ï¼‰
.\publish.ps1 -DryRun

# è·³è¿‡æµ‹è¯•ï¼ˆä¸æ¨èï¼‰
.\publish.ps1 -SkipTests
```

---

## ğŸ”„ è‡ªåŠ¨åŒ–æ­¥éª¤

å‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

### 1. ç‰ˆæœ¬ç®¡ç†
- âœ… è¯»å– `version.txt` å½“å‰ç‰ˆæœ¬
- âœ… æ ¹æ®å‚æ•°è‡ªåŠ¨è®¡ç®—ä¸‹ä¸€ä¸ªç‰ˆæœ¬
- âœ… æ›´æ–° `version.txt` æ–‡ä»¶

### 2. ä»£ç æ£€æŸ¥
- âœ… æ‹‰å–è¿œç¨‹æœ€æ–°ä»£ç 
- âœ… æ¸…ç†æ„å»ºç¼“å­˜
- âœ… ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
- âœ… **è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆå¿…é¡»é€šè¿‡ï¼‰**

### 3. Git æ“ä½œ
- âœ… è‡ªåŠ¨æäº¤æ‰€æœ‰æ›´æ”¹
- âœ… åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆæ ¼å¼ï¼šv0.0.10ï¼‰
- âœ… æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“
- âœ… æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“

### 4. å‘å¸ƒæ‘˜è¦
- âœ… æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- âœ… æ˜¾ç¤º GitHub Release é“¾æ¥
- âœ… æä¾›åç»­æ“ä½œå»ºè®®

---

## ğŸ“‹ version.txt æ ¼å¼

**æ–‡ä»¶ä½ç½®ï¼š** `version.txt`  
**æ ¼å¼ï¼š** `X.Y.Z` (è¯­ä¹‰åŒ–ç‰ˆæœ¬)

**ç¤ºä¾‹ï¼š**
```
0.0.9
```

**ç‰ˆæœ¬å·è¯´æ˜ï¼š**
- `X` (Major) - ä¸»ç‰ˆæœ¬å·ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- `Y` (Minor) - æ¬¡ç‰ˆæœ¬å·ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- `Z` (Patch) - ä¿®è®¢å·ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

---

## âš ï¸ é‡è¦æç¤º

### å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰åŠŸèƒ½å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£ï¼ˆREADMEã€CHANGELOGç­‰ï¼‰
- [ ] ä»£ç å·²ç»è¿‡ Code Review
- [ ] æ²¡æœ‰é—ç•™çš„ TODO æˆ– FIXME
- [ ] æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- [ ] æ€§èƒ½æ²¡æœ‰æ˜æ˜¾ä¸‹é™

### æµ‹è¯•å¿…é¡»é€šè¿‡

å‘å¸ƒè„šæœ¬**å¼ºåˆ¶è¦æ±‚æ‰€æœ‰æµ‹è¯•é€šè¿‡**ï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ä¼šè‡ªåŠ¨å–æ¶ˆå‘å¸ƒã€‚

```powershell
# æ‰‹åŠ¨è¿è¡Œæµ‹è¯•
go test ./... -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
go test ./tests -v -run TestEmbedded
```

### ç‰ˆæœ¬å·é€‰æ‹©æŒ‡å—

| å˜æ›´ç±»å‹ | ç‰ˆæœ¬ç±»å‹ | ç¤ºä¾‹ |
|---------|---------|------|
| Bug ä¿®å¤ | Patch | 0.0.9 -> 0.0.10 |
| æ–°å¢åŠŸèƒ½ï¼ˆå…¼å®¹ï¼‰ | Minor | 0.0.9 -> 0.1.0 |
| API ç ´åæ€§å˜æ›´ | Major | 0.0.9 -> 1.0.0 |

---

## ğŸ”§ æ‰‹åŠ¨å‘å¸ƒï¼ˆä¸æ¨èï¼‰

å¦‚æœè‡ªåŠ¨è„šæœ¬æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
echo "0.0.10" > version.txt

# 2. è¿è¡Œæµ‹è¯•
go test ./...

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "chore: release version 0.0.10"

# 4. åˆ›å»ºæ ‡ç­¾
git tag -a v0.0.10 -m "Release version 0.0.10"

# 5. æ¨é€
git push origin main
git push origin v0.0.10
```

---

## ğŸ“ å‘å¸ƒåæ“ä½œ

### 1. åˆ›å»º GitHub Release

è®¿é—®ï¼šhttps://github.com/neko233-com/db233-go/releases/new

- é€‰æ‹©åˆšåˆ›å»ºçš„æ ‡ç­¾ï¼ˆå¦‚ v0.0.10ï¼‰
- å¡«å†™ Release æ ‡é¢˜å’Œè¯´æ˜
- ä¸Šä¼ ç›¸å…³èµ„æºï¼ˆå¦‚æœæœ‰ï¼‰
- å‘å¸ƒ Release

### 2. æ›´æ–° CHANGELOG

ç¼–è¾‘ `CHANGELOG.md` æˆ–åˆ›å»ºæ–°çš„ç‰ˆæœ¬å˜æ›´æ—¥å¿—ï¼š

```markdown
## [0.0.10] - 2026-01-10

### Added
- æ–°å¢ JPA é£æ ¼å®ä½“ç»§æ‰¿æ”¯æŒ
- è‡ªåŠ¨ä¸»é”®æ£€æµ‹åŠŸèƒ½

### Changed
- ä¼˜åŒ– UPSERT é€»è¾‘

### Fixed
- ä¿®å¤åµŒå…¥ç»“æ„ä½“å­—æ®µæ‰«æé—®é¢˜
```

### 3. é€šçŸ¥å›¢é˜Ÿ

- ğŸ“§ å‘é€é‚®ä»¶é€šçŸ¥
- ğŸ’¬ åœ¨å›¢é˜Ÿé¢‘é“å‘å¸ƒæ¶ˆæ¯
- ğŸ“¢ æ›´æ–°æ–‡æ¡£ç½‘ç«™

---

## ğŸ› é—®é¢˜æ’æŸ¥

### æµ‹è¯•å¤±è´¥

```powershell
# æŸ¥çœ‹è¯¦ç»†æµ‹è¯•è¾“å‡º
go test ./... -v

# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
go test ./tests -v -run TestName
```

### æ¨é€å¤±è´¥

```bash
# æ£€æŸ¥è¿œç¨‹ä»“åº“è¿æ¥
git remote -v

# é‡æ–°æ¨é€
git push origin main --force-with-lease
git push origin v0.0.10
```

### ç‰ˆæœ¬å†²çª

```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v0.0.10

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v0.0.10

# é‡æ–°å‘å¸ƒ
.\publish.ps1
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [Git æ ‡ç­¾ç®¡ç†](https://git-scm.com/book/zh/v2/Git-åŸºç¡€-æ‰“æ ‡ç­¾)
- [Go Module å‘å¸ƒ](https://go.dev/doc/modules/publishing)

---

**æœ€åæ›´æ–°ï¼š** 2026-01-10  
**ç»´æŠ¤è€…ï¼š** neko233

